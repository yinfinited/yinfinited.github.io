Discounted Cumulative Gain

검색 품질을 평가하기 위한 방법으로 단순히 적합한 문서가 나오느냐 문제를 따지는 precision, recall 과 달리 상위 랭크에 나왔는지를 평가한다.

기본 개념은 어떤 쿼리에 대해 n 개의 문서가 나왔을 때 그 중 p 개를 선택하여 적합도를 다 더하는 것이다.

## CG

CG_p = rel_1 + \sum_{i=1}^{p}{rel_i}

주어진 쿼리에 대한 문서의 적합도 점수를 사전에 알고 있어야 한다. 점수는 0~5 척도 등 적당한 것을 사용한다.

## DCG

적합도를 그대로 더해서는 상위에 랭크된 것을 반영할 수 없기 때문에 랭크가 내려갈 수록 적합도 점수를 할인해준다.

$$
DCG_p = rel_1 + \sum_{i=2}^{p} \frac{rel_i}{log_2 i}
$$

## NDCG

$$
nDCG_p = \frac{DCG_p}{IDCG_p}
$$

적합도 점수를 그대로 사용하지 않고 1~p 에 따른 이상적인 점수를 미리 만들어주고 그 점수를 나누어준다.

예) p = 10 인 경우 ideal DCG를 아래와 같이 둔다.

```
3 3 3 2 2 2 1 0 0 0
```

실제 점수를 위 점수로 각각 할인하여 더한다.
