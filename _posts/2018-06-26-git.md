---
layout: post
title: "Git"
author: "yinfinited"
categories: 'dev'
tags: ['git']
typora-root-url: ../
---


## basic 

### file status

`.git` 이 생성된 디렉토리는 git이 그 내용을 관리하게 된다. 각 파일은 아래 상태 중 하나를 갖는다.

- untracked
- unmodified
- modified
- staged

#### untracked 

어떤 파일이 아직 한 번도 git 에 add 된 적이 없으면 untracked 상태가 된다.

#### unmodified

가장 최근 commit 에서 수정된 내용이 없는 상태

#### modified

가장 최근 commit 에서 파일 내용이 변경된 상태. 변경 상태를 가장 마지막 commit 상태로 되돌리고 싶으면 `checkout` 을 이용한다.

```
git checkout {filename} 
```

#### staged

가장 최근 commit 에서 파일 내용이 변경 된 후 `add` 명령으로 staging 된 상태. commit 이 가능한 상태로 commit 하는 순간 가장 최근 commit 이 새로 생기면서 해당 파일은 unmodified 상태가 된다.

만약 commit을 원하지 않으면 `reset` 명령을 이용해 staged 에서 modified 상태로 되돌릴 수 있다.

```
git reset {filename} 
```

### command

- `HEAD` : 가장 최근 commit 
- `HEAD^' : HEAD 보다 하나 더 이전 commit


#### pull

master 브랜치 가져오기

```
git pull 
```

```
git pull origin
```

```
git pull origin master
```

#### checkout

`checkout`은 workspace를 변경한다. 변경 대상은 특정 commit 이나 branch 가 된다.

branch 만들면서 workspace 변경

```
git checkout -b issue
```

이미 만들어진 branch 로 workspace 변경 

```
git checkout issue
```

특정 commit 으로 workspace 변경
```
git checkout {commitId}
```

#### push

remote 에 특정 branch 를 올린다.

```
git push origin master
git push origin issue
```

#### merge

`merge` 는 지정한 branch의 내용을 현재 branch와 합친다.

branch 정책을 사용하는 경우 기본 순서는 아래와 같다.

```
1. master 를 최신으로 업데이트
1. branch 로 이동 후 master 머지
1. master 로 이동
1. master 에서 branch 머지
```

만약 pull request 를 사용하는 경우는 1, 2를 수행한 뒤 push 하여 서버에서 merge 한다. master로 머지하는 것은 서버에서 하는 것을 추천.

#### resolve

되도록 merge conflict이 안나는 것이 좋지만 conflict이 발생하면 resolve 해주어야 한다.

#### diff

현재 workspace 내용과 마지막 commit 과 비교
```
git diff 
```
가장 최근 commit 과 그 이전 commit 비교
```
git diff HEAD^ HEAD
```
add 한 staging 영역과 마지막 commit 비교
```
git diff --staged
```

## advanced

### 3-way merge

### rebase





